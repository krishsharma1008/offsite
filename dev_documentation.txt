# Development Documentation

## 2025-11-25 15:45:11 IST - Odometer Component Implementation

### Changes Made:
- **Removed**: Progress bar component from PhotoCounter
- **Added**: Retro-style odometer component with smooth rolling digit animation

### Technical Details:

#### Modified Files:
- `src/components/PhotoCounter.jsx`

#### New Components:
1. **OdometerDigit Component**:
   - Individual digit component with smooth rolling animation
   - Uses Framer Motion for smooth transitions
   - Implements mechanical bounce easing for retro feel
   - Supports directional rolling (up/down) based on value changes
   - Staggered delay per digit for cascading effect

2. **Odometer Component**:
   - Displays used shots count in odometer format (e.g., "01 / 10")
   - Tracks previous value for smooth rolling transitions
   - Styled with retro mechanical aesthetic:
     - Dark panel background with border
     - Monospace font for mechanical look
     - Vertical separator line for retro feel
     - Vintage shadow effect

#### Features:
- Smooth rolling animation when value changes
- Retro mechanical bounce easing curve
- Staggered animation delays for multi-digit numbers
- Color changes based on low shot count (warning color)
- Removed progress bar as requested
- Maintains existing "SHOTS REMAINING" display

#### Animation Details:
- Duration: 0.75 seconds per digit
- Easing: [0.34, 1.56, 0.64, 1] (mechanical bounce)
- Delay: 0.05s per digit position for cascading effect
- Direction: Automatically determines up/down based on value change

### Testing:
- Verified no linting errors
- Component maintains backward compatibility
- Animation triggers on value changes
- Styling matches existing design system

## 2025-11-25 15:59:07 IST - Camera Fix & Odometer Size Increase

### Changes Made:
- **Fixed**: Camera initialization and error handling issues
- **Enhanced**: Video readiness detection with timeout and multiple event listeners
- **Improved**: Error messages for better user feedback on permission issues
- **Increased**: Odometer window size for better visibility

### Technical Details:

#### Modified Files:
- `src/hooks/useCamera.js`
- `src/components/PhotoCounter.jsx`

#### Camera Fixes:
1. **Improved Error Handling**:
   - Added specific error messages for different error types:
     - `NotAllowedError`: Permission denied message
     - `NotFoundError`: No camera found message
     - `NotReadableError`: Camera in use by another app message
   - Better cleanup on errors to prevent stream leaks

2. **Enhanced Video Readiness Detection**:
   - Added timeout (10 seconds) to prevent infinite waiting
   - Added `loadedmetadata` event listener for faster detection
   - Improved cleanup of event listeners
   - Better handling of edge cases where video might already be ready

3. **Stream Management**:
   - Properly stop existing streams before starting new ones
   - Clear error state before attempting new camera access
   - Added delay after setting srcObject for stream to initialize

#### Odometer Size Increase:
- Increased digit container: `h-[1.4em]` → `h-[1.6em]`, `w-[0.8em]` → `w-[1em]`
- Increased font size: `text-3xl` → `text-4xl`
- Increased padding: `px-4 py-3` → `px-6 py-4`
- Increased gap between digits: `gap-1` → `gap-2`
- Increased outer padding: `p-4` → `p-5`
- Changed border radius: `rounded-lg` → `rounded-xl` for smoother look

### Testing:
- Verified no linting errors
- Camera error handling improved with specific messages
- Odometer is now more visible and prominent
- All animations and sounds still work correctly

## 2025-11-26 10:12:37 IST - Supabase Authentication & Photo Book Implementation

### Overview:
Full integration of Supabase for user authentication, cloud photo storage, and a shared photo book gallery.

### Database Schema Created:

#### Tables:
1. **users_profile**:
   - `id` (UUID, references auth.users)
   - `display_name` (TEXT)
   - `email` (TEXT)
   - `photo_count` (INTEGER, 0-10)
   - `created_at`, `updated_at` (TIMESTAMP)
   - RLS policies for read/insert/update

2. **photos**:
   - `id` (UUID)
   - `user_id` (UUID, references auth.users)
   - `storage_path` (TEXT)
   - `public_url` (TEXT)
   - `event_name` (TEXT)
   - `created_at` (TIMESTAMP)
   - Triggers to auto-increment/decrement photo_count

#### Storage:
- `photos` bucket with public read access
- Policies for authenticated user uploads to their own folder

### New Files Created:

1. **`src/lib/supabase.js`**:
   - Supabase client initialization
   - Helper functions: uploadPhoto, getUserPhotoCount, getAllPhotos, getUserPhotos, deletePhoto

2. **`src/contexts/AuthContext.jsx`**:
   - Auth state management (user, profile, loading)
   - signUp, signIn, signOut methods
   - Photo count tracking and refresh

3. **`src/components/Auth.jsx`**:
   - Beautiful login/signup UI
   - Email + password authentication
   - Display name for new users
   - Error/success message handling

4. **`src/components/PhotoBook.jsx`**:
   - Displays all photos from all users
   - Grid layout with photographer name and timestamp
   - Full-screen photo viewer with navigation
   - Slideshow mode with auto-advance
   - Loading and empty states

### Modified Files:

1. **`src/utils/storage.js`**:
   - New `createPhotoStorage()` factory for Supabase integration
   - Kept legacy `photoStorage` for offline fallback

2. **`src/components/Camera.jsx`**:
   - Integrated with AuthContext
   - Uses Supabase storage for photo uploads
   - Shows user profile info
   - Photo Book navigation button
   - Upload progress indication

3. **`src/App.jsx`**:
   - Wrapped with AuthProvider
   - Auth gate (shows login if not authenticated)
   - View routing: camera, gallery, photobook

### Features:
- Email/password authentication
- Auto-profile creation on signup
- 10 photos per user limit (enforced in DB)
- Cloud storage for photos
- Shared photo book visible to all users
- Slideshow mode with sound effects
- Real-time photo count sync

### Supabase Project:
- Project: Zapcom_Offsite
- URL: https://ptqrfhvqyzqkdosnfkhg.supabase.co
- Region: ap-southeast-2

### Testing:
- All linting errors resolved
- Database migrations applied successfully
- Storage bucket created with proper policies
- Auth flow working with email/password

## 2025-11-26 10:25:00 IST - PhotoBook Loading Fix

### Issue:
Photo Book was stuck on "Loading photos..." indefinitely.

### Root Cause:
The `getAllPhotos()` function was using Supabase's embedded resource syntax to join `photos` with `users_profile`, but PostgREST couldn't detect the relationship automatically because:
- `photos.user_id` referenced `auth.users(id)`
- `users_profile.id` also referenced `auth.users(id)`
- No direct FK existed between `photos` and `users_profile`

### Fix:
1. Added direct foreign key: `photos.user_id -> users_profile.id`
2. Added fallback mechanism in `getAllPhotos()` that fetches photos and profiles separately if the join fails
3. Added error state handling to PhotoBook component

### Files Modified:
- `src/lib/supabase.js` - Added robust fallback in getAllPhotos()
- `src/components/PhotoBook.jsx` - Added error state and retry button

### Database Migration:
- `add_photos_to_users_profile_fk` - Added FK constraint for proper joins

## 2025-11-26 21:38:00 IST - Auth getSession Timeout Warning Fix

### Issue:
Console warning `"[Auth] getSession timed out, proceeding without session"` appearing after sign-in, even though authentication was working correctly.

### Root Cause:
The `initAuth` function in `AuthContext.jsx` wrapped `supabase.auth.getSession()` in a `Promise.race` with a 3-second timeout. If network latency, Supabase project cold start, or browser load caused `getSession()` to take slightly longer than 3 seconds on initial mount, the custom timeout would fire and log the warning—even though Supabase would finish the request shortly after and `onAuthStateChange` would still establish the session correctly.

### Investigation:
- Used Supabase MCP to query `auth` and `api` logs for project `Zapcom_Offsite`
- Logs showed all `/auth/v1/token` and `/auth/v1/user` requests returning `200` status with sub-second durations
- No server-side timeouts or errors were occurring
- The warning was entirely client-side due to the artificial 3s timeout racing against `getSession()`

### Fix:
Removed the manual `Promise.race` timeout wrapper and made a direct call to `supabase.auth.getSession()`, relying on Supabase's own behavior. The existing error handling and background profile/photo-count loading were preserved.

### Files Modified:
- `src/contexts/AuthContext.jsx`
  - Removed `timeoutPromise` and `Promise.race` logic
  - Simplified `initAuth` to directly await `supabase.auth.getSession()`
  - Kept all console logging for debugging
  - Removed the `"[Auth] getSession timed out, proceeding without session"` warning branch

### Code Change Summary:
```jsx
// Before (with timeout):
const sessionPromise = supabase.auth.getSession();
const timeoutPromise = new Promise((_, reject) => 
  setTimeout(() => reject(new Error('getSession timeout')), 3000)
);
const result = await Promise.race([sessionPromise, timeoutPromise]);

// After (direct call):
const { data, error } = await supabase.auth.getSession();
const session = data?.session ?? null;
```

### Testing:
- Verified app loads correctly at http://localhost:5173/
- Console logs show proper auth flow:
  - `[Auth] Starting initAuth...`
  - `[Auth] Calling getSession...`
  - `[Auth] onAuthStateChange: SIGNED_IN` (or `TOKEN_REFRESHED`)
  - `[Auth] Fetching profile and photo count for user: ...`
- **Confirmed: No more `"[Auth] getSession timed out, proceeding without session"` warning**
- Auth flow continues to work correctly with existing sessions and new sign-ins

## 2025-11-26 21:48:00 IST - Auth Loading State Fix

### Issue:
After removing the timeout, the app was stuck on the loading screen even though auth was completing successfully.

### Root Cause:
Race condition between `initAuth()` and `onAuthStateChange`:
1. `initAuth()` was called first, then `onAuthStateChange` listener was set up
2. Supabase fires `onAuthStateChange` immediately when there's an existing session
3. In React StrictMode, the component mounts/unmounts twice
4. The `mounted` check in `initAuth` would fail because StrictMode unmounted the first instance
5. `loading` was never set to `false`

### Fix:
Refactored the auth initialization to:
1. Set up `onAuthStateChange` listener FIRST (before calling `initAuth`)
2. Created a shared `handleSession()` helper function used by both paths
3. `onAuthStateChange` now handles setting `loading=false` for existing sessions
4. `initAuth` only sets `loading=false` if there's NO session (for the logged-out case)

### Code Change Summary:
```jsx
// New shared handler
const handleSession = async (session, source) => {
  setUser(session?.user ?? null);
  setLoading(false);  // Always set loading=false here
  // ... fetch profile and photo count
};

// Set up listener FIRST
const { data: { subscription } } = supabase.auth.onAuthStateChange(
  async (event, session) => {
    await handleSession(session, `onAuthStateChange:${event}`);
  }
);

// Then call getSession (only sets loading=false if no session)
const initAuth = async () => {
  const { data, error } = await supabase.auth.getSession();
  if (!data?.session) {
    setLoading(false);  // Only for logged-out case
  }
};
```

### Files Modified:
- `src/contexts/AuthContext.jsx`

### Testing:
- App loads correctly and shows camera screen
- User profile displays correctly (name, remaining shots)
- Console shows proper auth flow with all events firing correctly

## 2025-11-26 21:55:00 IST - PhotoCounter Styling Simplification

### Changes Made:
- Simplified OdometerDigit component styling
- Removed blur effects and complex drop shadows
- Replaced Tailwind classes with inline styles for more predictable rendering
- Cleaned up Odometer container styling with simpler gradient background
- Removed unused `maxValue` prop from Odometer component

### Files Modified:
- `src/components/PhotoCounter.jsx`

### Technical Details:
- Digit container: Fixed dimensions (32x48px) with flex centering
- Font: System fonts (-apple-system, SF Pro Display) at 36px bold
- Animation: Simplified spring animation without blur transitions
- Container: Cleaner gradient background with subtle box shadow and backdrop blur

### Git:
- Commit: `f6599db` - "refactor(PhotoCounter): simplify styling and animation logic"
- Pushed to: `origin/main`

## 2025-11-27 09:30:00 IST - Photo Book Responsive Redesign & Download Functionality

### Overview:
Complete redesign of the Photo Book page to be fully scrollable, mobile-friendly, with smooth animations, and added download functionality for exporting all photos as ZIP or PDF.

### Changes Made:

#### 1. Layout & Responsiveness
- Refactored PhotoBook to use fixed full-screen layout with sticky header and scrollable content area
- Implemented responsive grid: 2 columns (mobile), 3 (tablet), 4 (desktop), 5 (large screens)
- Added proper padding and spacing that adapts to screen size
- Ensured scrollable content area doesn't conflict with global overflow:hidden styles

#### 2. Visual Design Improvements
- Redesigned photo cards with cleaner, minimal aesthetic
- Improved typography and spacing for photographer names and timestamps
- Enhanced hover/tap animations with subtle scale effects
- Better contrast and readability for photo info overlays
- Refined header with better mobile-friendly button sizes

#### 3. Animations
- Added subtle card entry animations with staggered delays (0.04s per card)
- Smooth transitions for full-screen viewer and slideshow overlays
- Enhanced hover states with gentle scale transforms
- Improved overlay transitions with refined easing curves

#### 4. Download Functionality
- **ZIP Download**: Downloads all photos as individual image files in a ZIP archive
  - Descriptive filenames: `{photographer}_{date}_{index}.jpg`
  - Progress indicator showing current/total photos
  - Error handling for failed photo fetches
- **PDF Download**: Creates a PDF document with all photos
  - Cover page with title and photo count
  - 2 photos per page in portrait layout
  - Photographer name and timestamp for each photo
  - Progress indicator during PDF generation
- **UI Features**:
  - Download button in header with dropdown menu
  - Progress overlay with percentage and status message
  - Error toast notifications for failed downloads
  - Disabled state during downloads to prevent multiple simultaneous downloads

### New Files Created:
- `src/utils/downloads.js`: Utility functions for ZIP and PDF generation
  - `downloadPhotosAsZip()`: Fetches all photos, creates ZIP archive
  - `downloadPhotosAsPdf()`: Generates PDF with photo grid layout
  - Helper functions for filename sanitization and date formatting

### Files Modified:
- `src/components/PhotoBook.jsx`:
  - Complete layout restructure for scrollability
  - Responsive grid implementation
  - Download button and menu UI
  - Download state management (loading, progress, errors)
  - Progress overlay and error toast components
  - Enhanced animations throughout

### Dependencies Added:
- `jszip`: For creating ZIP archives
- `jspdf`: For PDF generation
- `html2canvas`: For converting images to canvas (used by jspdf)

### Technical Details:

#### Download Implementation:
- ZIP: Uses JSZip to fetch each photo URL, convert to blob, and package into ZIP
- PDF: Uses jsPDF to create multi-page document with photos arranged in grid
- Progress tracking: Callback-based progress updates for both download types
- Error handling: Graceful error handling with user-friendly messages
- Filename sanitization: Removes invalid characters from photographer names

#### Responsive Breakpoints:
- Mobile (< 640px): 2 columns, smaller gaps, reduced padding
- Tablet (640px - 1024px): 3 columns, medium gaps
- Desktop (1024px - 1280px): 4 columns, larger gaps
- Large (> 1280px): 5 columns, maximum spacing

#### Animation Details:
- Card entry: 0.35s duration with staggered 0.04s delays
- Hover scale: 1.02x with 0.2s transition
- Tap scale: 0.98x for tactile feedback
- Overlay transitions: 0.28s with smooth easing

### Testing:
- Verified scrollability on mobile, tablet, and desktop
- Tested download functionality with various photo counts
- Confirmed progress indicators work correctly
- Verified error handling for network failures
- Tested responsive grid at multiple breakpoints
- Confirmed animations are smooth and performant
- No linting errors introduced

### User Experience Improvements:
- Fully scrollable photo grid (no more fixed viewport issues)
- Mobile-friendly touch targets and spacing
- Clear visual feedback during downloads
- Professional PDF layout with cover page
- Organized ZIP files with descriptive names
- Smooth, subtle animations that enhance without distracting

## 2025-11-27 14:30:00 IST - Orphaned Photo Records Cleanup

### Issue:
Photos were deleted from Supabase storage, but their database records still existed, causing them to appear in the Photo Book UI with broken image links (showing empty placeholders).

### Solution Implemented:

#### 1. Storage File Validation
- Added `checkStorageFileExists()` function that verifies storage files exist by checking public URLs with HEAD requests
- Updated `getAllPhotos()` to validate all photos before returning them
- Photos with missing storage files are automatically filtered out from the UI
- Background cleanup is triggered when orphaned photos are detected

#### 2. Cleanup Function
- Created `cleanupOrphanedPhotos()` function in `src/lib/supabase.js`:
  - Fetches all photos from database
  - Checks each photo's storage file existence
  - Deletes orphaned database records
  - Updates user photo counts automatically
- Created standalone cleanup script `scripts/cleanup-orphaned-photos.js` for manual execution

#### 3. Database Cleanup
- Executed cleanup script which identified and deleted 11 orphaned photo records
- Updated photo counts for affected users:
  - User `62b47da7-b1a3-48da-b91f-4dd5ddbf19a7`: 10 → 0 photos
  - User `337dabe4-0858-4d18-b612-4dd665bb75bc`: 1 → 0 photos

### Files Modified:
- `src/lib/supabase.js`:
  - Added `checkStorageFileExists()` helper function
  - Added `cleanupOrphanedPhotos()` function for database cleanup
  - Updated `getAllPhotos()` to validate storage files and filter out missing ones
  - Automatic background cleanup when orphaned photos are detected

### New Files Created:
- `scripts/cleanup-orphaned-photos.js`: Standalone script for manual cleanup execution

### Technical Details:

#### Storage Validation:
- Uses HEAD requests to check if public URLs return 200 OK
- Assumes file exists on unknown errors to avoid false positives
- Logs warnings for debugging without breaking functionality

#### Cleanup Process:
1. Fetch all photos with public URLs from database
2. Check each photo's storage file existence
3. Collect orphaned photo IDs
4. Delete orphaned records in batch
5. Update user photo counts by subtracting deleted count

#### Future Prevention:
- `getAllPhotos()` now validates all photos before returning
- Orphaned photos are filtered out automatically
- Background cleanup runs when orphaned photos are detected
- Users will never see broken image placeholders

### Testing:
- Verified cleanup script successfully identified and deleted 11 orphaned records
- Confirmed user photo counts were updated correctly
- Tested `getAllPhotos()` validation with missing storage files
- No linting errors introduced
- Photo Book now only displays photos with valid storage files

## 2025-11-27 15:00:00 IST - Loading Screen Redesign

### Overview:
Complete redesign of the LoadingScreen component with refined visuals, sophisticated animations, enhanced interactivity, and improved visual hierarchy for a more polished and engaging user experience.

### Design Improvements Implemented:

#### 1. Enhanced Visual Hierarchy
- **Larger, more prominent title**: Increased from text-5xl to text-6xl/7xl/8xl with responsive scaling
- **Refined typography**: Better font weights, improved letter spacing (tracking-[0.6em]), enhanced text shadows with multi-layer glows
- **Better event details layout**: Improved visual separation with dot separators and animated pulse indicators
- **Enhanced spacing**: Increased margins (mb-12 sm:mb-16) for better breathing room
- **Responsive design**: Better scaling across mobile, tablet, and desktop breakpoints

#### 2. Sophisticated Camera Lens Animation
- **Multi-ring rotating system**: 
  - Outer ring rotates clockwise (8s duration)
  - Middle ring rotates counter-clockwise (6s duration)
  - Visual markers on rings for rotation feedback
- **Pulsing center with aperture blades**:
  - 6-blade aperture effect with staggered opacity animations
  - Gradient center with enhanced glow effects
  - Scale and opacity pulsing (2s duration)
  - Multi-layer shadows and glows for depth
- **Enhanced visual effects**: Multiple border layers, gradient borders, and sophisticated shadow system

#### 3. Dynamic Progress Indicator
- **Fluid wave animation**: Replaced static bars with smooth wave effect
- **Shimmer effect**: Animated shimmer overlay for premium feel
- **Progress percentage**: Subtle percentage display (0-100%)
- **Smooth transitions**: Eased animations with proper timing
- **Enhanced styling**: Gradient fills, glow effects, and rounded corners

#### 4. Interactive Elements
- **Dynamic status messages**: Cycles through 4 different messages:
  - "Calibrating lens"
  - "Loading shared roll"
  - "Preparing camera"
  - "Initializing film"
- **Smooth message transitions**: Fade in/out animations when messages change
- **Progress tracking**: Real-time progress from 0-100% over 2.5 seconds
- **Status cycling**: Messages change every 600ms for dynamic feel

#### 5. Visual Refinements
- **Enhanced glass morphism**:
  - Improved blur (backdrop-filter: blur(30px))
  - Better transparency layers
  - Multi-layer gradients for depth
  - Enhanced border styling (rgba(255,255,255,0.12))
- **Layered background effects**:
  - Multiple radial gradients with different positions
  - Subtle parallax animation (8s scale pulse)
  - Enhanced film grain integration
  - Better gradient opacity and positioning
- **Enhanced shadows and glows**:
  - Multi-layer box shadows
  - Text shadows with multiple glows
  - Ring glow effects on interactive elements
  - Improved depth perception

#### 6. Polished Animations
- **Staggered entrance animations**:
  - Container variants with staggerChildren
  - Individual item variants with refined timing
  - Smooth easing curves ([0.25, 0.1, 0.25, 1])
- **Refined timing**:
  - Background: 0.0s fade in
  - Header: 0.2s delay
  - Title: 0.4s delay
  - Card: 0.6s delay with bounce easing
  - Status: 1.0s delay
- **Smooth transitions**: All animations use refined easing functions
- **Performance optimized**: 60fps animations with proper will-change hints

### Files Modified:
- `src/components/LoadingScreen.jsx`: Complete redesign with all new features

### Technical Details:

#### Animation System:
- Uses Framer Motion variants for organized animation structure
- Container variants with staggerChildren for coordinated entrances
- Individual item variants for fine-tuned control
- Infinite animations for continuous effects (rotations, pulses)

#### Camera Lens Implementation:
- Three-layer ring system with independent rotations
- Aperture blade effect using CSS clip-path
- Gradient overlays for depth
- Multiple shadow layers for realistic lighting

#### Progress System:
- State-based progress tracking (0-100%)
- Interval-based updates (50ms intervals)
- Wave animation using transform skew
- Shimmer effect with linear gradient overlay

#### Status Message System:
- Array of 4 status messages
- Interval-based cycling (600ms)
- Smooth fade transitions using AnimatePresence pattern
- Key-based re-rendering for proper animation triggers

### New Features:
1. **Multi-ring camera lens** with rotating aperture effect
2. **Fluid wave progress bar** with shimmer overlay
3. **Dynamic status messages** that cycle during loading
4. **Enhanced background** with layered gradients and parallax
5. **Progress percentage** display
6. **Responsive typography** that scales across devices
7. **Sophisticated glass morphism** with enhanced blur and transparency

### Animation Timeline:
- 0.0s: Background gradients fade in
- 0.2s: Container and header begin animation
- 0.3s: "Zapcom Presents" text appears
- 0.4s: Main title animates in
- 0.6s: Event details appear
- 0.7s: Glass card slides up with bounce
- 0.8s: Camera lens animation begins
- 1.0s: Status messages start cycling
- 1.2s: Progress bar begins animating
- 2.5s: Complete transition to main app

### Testing:
- Verified all animations run smoothly at 60fps
- Tested responsive design across mobile, tablet, and desktop
- Confirmed status messages cycle correctly
- Verified progress animation completes in sync with timer
- No linting errors introduced
- All interactive elements work as expected

## 2025-11-27 15:30:00 IST - Camera Rotation for Selfies

### Overview:
Enhanced the camera rotation feature to allow users to switch between front (selfie) and back cameras on mobile devices, with improved UI visibility and user experience.

### Implementation Details:

#### Camera Rotation Functionality
The camera rotation feature was already implemented in the codebase but has been enhanced for better visibility and usability:

1. **useCamera Hook** (`src/hooks/useCamera.js`):
   - `facingMode` state tracks current camera ('environment' for back, 'user' for front)
   - `isSwitching` state prevents rapid toggling during camera switch
   - `switchCamera()` function:
     - Stops current stream
     - Toggles between 'environment' and 'user' facing modes
     - Initializes new stream with opposite camera
     - Includes error handling to restore previous camera if switch fails
   - `startCamera()` supports `facingMode` parameter for camera selection

2. **Camera Component** (`src/components/Camera.jsx`):
   - `handleSwitchCamera()` function calls the hook's switchCamera method
   - Enhanced camera flip button with improved visibility:
     - Larger button size (w-14 h-14 instead of w-12 h-12)
     - Better visual feedback with hover and active states
     - Loading spinner animation during camera switch
     - Active indicator dot when camera is ready
     - Enhanced tooltip text ("Switch to front camera (selfie)")
     - Improved icon design with flip arrows
     - Glow effect when active

### UI Enhancements:

#### Camera Flip Button Improvements:
- **Size**: Increased from 12x12 to 14x14 for better touch target
- **Visual Feedback**:
  - Hover scale animation (1.1x)
  - Active state with enhanced background
  - Glow effect (box-shadow with night-accent color)
  - Loading spinner during switch operation
- **Icon Design**:
  - Camera icon with flip arrows on sides
  - Clear visual indication of rotation capability
  - Smooth animations during state changes
- **Accessibility**:
  - Clear tooltip text
  - Disabled state when camera is not ready or switching
  - Visual indicators for active/ready state

### Technical Features:

#### Camera Switching Process:
1. User clicks flip button
2. Current stream is stopped and cleaned up
3. `facingMode` is toggled (environment ↔ user)
4. New stream is requested with new facing mode
5. Video element is updated with new stream
6. Camera ready state is restored

#### Error Handling:
- If front camera is not available, error is caught and displayed
- Attempts to restore previous camera if switch fails
- Graceful degradation for devices without front camera support
- User-friendly error messages

#### State Management:
- `isSwitching` prevents multiple simultaneous switch attempts
- Button is disabled during switch operation
- Visual feedback shows switching state clearly
- Sound effects provide audio feedback (counter click)

### Files Modified:
- `src/components/Camera.jsx`: Enhanced camera flip button UI and interactions

### User Experience:
- **Mobile Users**: Can now easily switch to front camera for selfies
- **Visual Clarity**: Button is more prominent and easier to find
- **Smooth Transitions**: Loading state provides clear feedback during switch
- **Error Handling**: Graceful handling of devices without front camera
- **Accessibility**: Clear tooltips and visual states

### Testing:
- Verified camera switching works on mobile devices
- Confirmed front camera (selfie mode) functions correctly
- Tested error handling for devices without front camera
- Verified button is disabled during switch operation
- Confirmed smooth transitions between cameras
- No linting errors introduced
